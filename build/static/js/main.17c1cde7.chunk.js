(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),c=n(34),i=n.n(c),u=(n(41),n(23)),o=n(15),l=n.n(o),d=n(19),h=n(9),j=n(10),b=n(12),m=n(11),O=(n(43),r.a.createContext({})),f=function(){return Object(a.jsx)(O.Consumer,{children:function(e){return Object(a.jsxs)("form",{className:"formTweet",onSubmit:function(t){t.preventDefault();var n=(new Date).toISOString(),a={content:e.tweet,date:n};e.setTweet(a),e.handleOnTweetChange("")},children:[Object(a.jsx)("div",{children:Object(a.jsx)("textarea",{type:"text",name:"tweet",id:"tweet",className:"textareaTweet",required:!0,placeholder:"What you have in mind...",value:e.tweet,onChange:function(t){e.handleOnTweetChange(t.target.value),t.target.value.length>140?e.setDisabled(!0):e.setDisabled(!1)}})}),Object(a.jsxs)("div",{className:"SubmitPart",children:[e.IsDisabled&&Object(a.jsx)("div",{className:"MessageError",children:"The tweet can't contain more than 140 chars."}),Object(a.jsx)("button",{className:"buttonTweet",type:"submit",disabled:e.IsDisabled,children:"Tweet"})]})]})}})},v=(n(44),function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={content:a.props.content,date:a.props.date,userName:a.props.userName},a}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("li",{className:"tweet",children:[Object(a.jsxs)("div",{className:"top",children:[Object(a.jsx)("div",{children:this.state.userName}),Object(a.jsx)("div",{children:this.state.date})]}),Object(a.jsx)("div",{className:"bottom",children:this.state.content})]})}}]),n}(r.a.Component)),x=(n(45),function(){return Object(a.jsx)(O.Consumer,{children:function(e){return Object(a.jsx)("ul",{className:"tweets",children:e.tweets.map((function(e){return Object(a.jsx)(v,{content:e.content,date:e.date,userName:e.userName},e.id)}))})}})}),p=n(20),w=n.n(p),g="https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com";function N(){return w.a.get("".concat(g,"/tweet"))}n(63);var y=n(16),C=n(2),S=(n(64),n(14)),k=n.n(S),T=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={userName:"yonathan"},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;k.a.getItem("name").then((function(t){t&&e.setState({userName:t})}))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.userName;this.props.onChangeUser(t)}},{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Profile"}),Object(a.jsx)("p",{children:"User Name"}),Object(a.jsxs)("form",{className:"formUser",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(a.jsx)("div",{children:Object(a.jsx)("textarea",{className:"textareaUser",type:"text",name:"userName",id:"userName",required:!0,value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t)}})}),Object(a.jsx)("button",{className:"buttonUser",type:"submit",children:"Save"})]})]})}}]),n}(r.a.Component),D=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={tweets:[],isLoading:!1,error:"",userName:"yonathan",tweet:"",IsDisabled:!1,setDisabled:function(e){return a.setState({IsDisabled:e})},handleOnTweetChange:function(e){return a.setState({tweet:e})},setTweet:function(e){var t;e.userName=a.state.userName,a.setState({isLoading:!0,error:""}),(t=e,w.a.post("".concat(g,"/tweet"),t)).then((function(){return a.loadTweets()})).catch((function(e){return a.setState({isLoading:!1,error:e})}))}},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadTweets1(),k.a.getItem("name").then((function(t){t&&e.setState({userName:t})})),setInterval((function(){e.loadTweets()}),5e3)}},{key:"loadTweets1",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,this.setState({tweets:t.data.tweets,isLoading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTweets",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,n=0,a=0;case 5:if(!(a<t.data.tweets.length)){e.next=12;break}if(t.data.tweets[a].id!==this.state.tweets[0].id){e.next=9;break}return n=a,e.abrupt("break",12);case 9:a++,e.next=5;break;case 12:s=t.data.tweets.slice(0,n),this.setState((function(e){return{tweets:[].concat(Object(u.a)(s),Object(u.a)(e.tweets)),isLoading:!1}}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOnUserChange",value:function(e){k.a.setItem("name",e),this.setState({userName:e})}},{key:"render",value:function(){var e=this;return Object(a.jsx)(O.Provider,{value:this.state,children:Object(a.jsx)(y.a,{children:Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"navbar",children:[Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(y.b,{to:"/",children:"Home"})}),Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(y.b,{to:"/user",children:"User"})})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(C.c,{children:[Object(a.jsx)(C.a,{path:"/user",children:Object(a.jsx)(T,{onChangeUser:function(t){return e.handleOnUserChange(t)}})}),Object(a.jsxs)(C.a,{path:"/",children:[this.state.isLoading&&Object(a.jsx)("p",{className:"loading",children:"Loading..."}),!this.state.isLoading&&Object(a.jsxs)("div",{children:[Object(a.jsx)(f,{}),this.state.error&&Object(a.jsx)("div",{children:this.state.error}),Object(a.jsx)(x,{})]})]})]})})]})})})}}]),n}(r.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(D,{})}),document.getElementById("root")),L()}},[[69,1,2]]]);
//# sourceMappingURL=main.17c1cde7.chunk.js.map