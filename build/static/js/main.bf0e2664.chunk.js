(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(2),i=n.n(s),r=n(28),c=n.n(r),o=(n(37),n(23)),u=n.n(o),l=n(29),h=n(12),d=n(13),j=n(15),g=n(14),b=(n(39),i.a.createContext({})),m=function(){return Object(a.jsx)(b.Consumer,{children:function(e){return Object(a.jsxs)("form",{className:"formTweet",onSubmit:function(t){t.preventDefault();var n=new Date,a={content:e.tweet,dateR:n.toISOString(),date:n};e.setTweet(a),e.handleOnTweetChange("")},children:[Object(a.jsx)("div",{children:Object(a.jsx)("textarea",{type:"text",name:"tweet",id:"tweet",className:"textareaTweet",required:!0,placeholder:"What you have in mind...",value:e.tweet,onChange:function(t){e.handleOnTweetChange(t.target.value),t.target.value.length>140?e.setDisabled(!0):e.setDisabled(!1)}})}),Object(a.jsxs)("div",{className:"SubmitPart",children:[e.IsDisabled&&Object(a.jsx)("div",{className:"MessageError",children:"The tweet can't contain more than 140 chars."}),Object(a.jsx)("button",{className:"buttonTweet",type:"submit",disabled:e.IsDisabled,children:"Tweet"})]})]})}})},p=(n(40),n(24));n(41),n(44),n(55);p.a.initializeApp({apiKey:"AIzaSyChgDlQ6sy5w4lizsBFKPIC02_ZPFXA15c",authDomain:"microbloggingapp-f3af3.firebaseapp.com",projectId:"microbloggingapp-f3af3",storageBucket:"microbloggingapp-f3af3.appspot.com",messagingSenderId:"741625542230",appId:"1:741625542230:web:3f1e6efbe9b77a4351adf7"});var f=p.a,v=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={content:a.props.content,date:a.props.date,userName:a.props.userName},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.firestore().collection("users").doc(this.props.userName).get().then((function(t){e.setState({userName:t.data().username})}))}},{key:"render",value:function(){return Object(a.jsxs)("li",{className:"tweet",children:[Object(a.jsxs)("div",{className:"top",children:[Object(a.jsx)("div",{children:this.state.userName}),Object(a.jsx)("div",{children:this.state.date})]}),Object(a.jsx)("div",{className:"bottom",children:this.state.content})]})}}]),n}(i.a.Component),O=(n(46),n(30)),x=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).fetchMoreData=function(){a.state.items.length>=a.state.tweets.length?a.setState({hasMore:!1}):setTimeout((function(){a.state.index+10>a.state.tweets.length?a.setState((function(){return{items:a.state.items.concat(a.state.tweets.slice(a.state.index,a.state.tweets.length)),index:a.state.index+10}})):a.setState((function(){return{items:a.state.items.concat(a.state.tweets.slice(a.state.index,a.state.index+10)),index:a.state.index+10}}))}),1e3)},a.state={tweets:a.props.tweets,items:a.props.tweets.slice(0,10),hasMore:!0,index:10},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)(O.a,{dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.hasMore,loader:Object(a.jsx)("h4",{children:"Loading..."}),endMessage:Object(a.jsx)("p",{style:{textAlign:"center"},children:Object(a.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(a.jsx)("ul",{className:"tweets",children:this.state.items.map((function(e){return Object(a.jsx)(v,{content:e.content,date:e.dateR,userName:e.userName},e.date)}))})})}}]),n}(i.a.Component),w=(n(47),n(17)),I=n(5),S=(n(48),function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={userName:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=f.auth().currentUser;f.firestore().collection("users").doc(t.uid).get().then((function(t){e.setState({userName:t.data().username})}))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.userName;this.props.onChangeUser(t)}},{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"uploadImage",value:function(e){var t=f.auth().currentUser,n=f.storage().ref("photos/".concat(t.uid)),a=e.target.files[0];n.put(a)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Profile"}),Object(a.jsx)("p",{children:"User Name"}),Object(a.jsxs)("form",{className:"formUser",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(a.jsx)("div",{children:Object(a.jsx)("textarea",{className:"textareaUser",type:"text",name:"userName",id:"userName",required:!0,value:this.state.userName,onChange:function(t){return e.handleUserNameChange(t)}})}),Object(a.jsx)("button",{className:"buttonUser",type:"submit",children:"Save"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Upload Profile Picture"})}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"file",accept:"image/*",capture:"camera",id:"cameraInput",onChange:function(t){e.uploadImage(t)}})})]})}}]),n}(i.a.Component)),N=(n(49),f.auth()),y=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={emailLogIn:"",passwordLogIn:"",emailSignIn:"",userNameSignIn:"",passwordSignIn:"",redirect:!1},a}return Object(d.a)(n,[{key:"emailLogInChange",value:function(e){this.setState({emailLogIn:e.target.value})}},{key:"passwordLogInChange",value:function(e){this.setState({passwordLogIn:e.target.value})}},{key:"emailSignInChange",value:function(e){this.setState({emailSignIn:e.target.value})}},{key:"passwordSignInChange",value:function(e){this.setState({passwordSignIn:e.target.value})}},{key:"userNameSignInChange",value:function(e){this.setState({userNameSignIn:e.target.value})}},{key:"handleLogIn",value:function(e){var t=this;e.preventDefault();var n=this.state.emailLogIn,a=this.state.passwordLogIn;N.signInWithEmailAndPassword(n,a).then((function(){t.setState({emailLogIn:"",passwordLogIn:"",redirect:!0})})).catch((function(e){var t=e.code,n=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(n)}))}},{key:"handleSignIn",value:function(e){var t=this;e.preventDefault();var n=this.state.emailSignIn,a=this.state.passwordSignIn,s=this.state.userNameSignIn;N.createUserWithEmailAndPassword(n,a).then((function(e){var a={email:n,username:s,photoURL:""};f.firestore().collection("users").doc(e.user.uid).set(a),t.setState({emailSignIn:"",passwordSignIn:"",redirect:!0})})).catch((function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)}))}},{key:"logInWithGoogle",value:function(){var e=this,t=new f.auth.GoogleAuthProvider;f.auth().signInWithPopup(t).then((function(e){var t=e.user,n={email:t.email,username:t.displayName,photoURL:t.photoURL};f.firestore().collection("users").doc(t.uid).set(n)})).then((function(){e.setState({redirect:!0})}))}},{key:"render",value:function(){var e=this;return this.state.redirect?Object(a.jsx)(I.a,{to:"/tweets"}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{className:"LogIn",onSubmit:function(t){return e.handleLogIn(t)},children:[Object(a.jsx)("h1",{children:"Log In"}),Object(a.jsx)("input",{placeholder:"Email Address",value:this.state.emailLogIn,onChange:function(t){return e.emailLogInChange(t)}}),Object(a.jsx)("input",{type:"password",placeholder:"PassWord",value:this.state.passwordLogIn,onChange:function(t){return e.passwordLogInChange(t)}}),Object(a.jsx)("button",{type:"submit",children:"Log In"})]}),Object(a.jsxs)("form",{className:"SignIn",onSubmit:function(t){return e.handleSignIn(t)},children:[Object(a.jsx)("h1",{children:"Doesn't have an account ? Sign up now !"}),Object(a.jsx)("input",{placeholder:"Email Address",value:this.state.emailSignIn,onChange:function(t){return e.emailSignInChange(t)}}),Object(a.jsx)("input",{type:"password",placeholder:"PassWord",value:this.state.passwordSignIn,onChange:function(t){return e.passwordSignInChange(t)}}),Object(a.jsx)("input",{placeholder:"UserName",value:this.state.userNameSignIn,required:!0,onChange:function(t){return e.userNameSignInChange(t)}}),Object(a.jsx)("button",{type:"submit",children:"Sign In"})]}),Object(a.jsx)("button",{onClick:function(){e.logInWithGoogle()},children:"Or sign in with Google"})]})}}]),n}(i.a.Component),C=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={tweets:[],isLoading:!1,error:"",userName:"",tweet:"",IsDisabled:!1,setDisabled:function(e){return a.setState({IsDisabled:e})},handleOnTweetChange:function(e){return a.setState({tweet:e})},setTweet:function(e){e.userName=f.auth().currentUser.uid,a.setState({isLoading:!0,error:""}),f.firestore().collection("tweets").add(e)}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadTweets()}},{key:"loadTweets",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.firestore().collection("tweets").onSnapshot((function(e){var n=[];e.forEach((function(e){n.push(e.data())})),n.sort((function(e,t){return t.date-e.date})),t.setState({tweets:n,isLoading:!1})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isLoggedIn",value:function(){return!!f.auth().currentUser}},{key:"onChangeUser",value:function(e){var t=f.auth().currentUser,n=f.firestore().collection("users").doc(t.uid);return f.firestore().runTransaction((function(t){return t.get(n).then((function(){t.update(n,{username:e})}))}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(b.Provider,{value:this.state,children:Object(a.jsxs)(w.a,{children:[!this.isLoggedIn()&&Object(a.jsx)(I.a,{to:"/"}),Object(a.jsxs)(I.d,{children:[Object(a.jsxs)(I.b,{path:"/tweets",children:[Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"navbar",children:[Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/tweets",children:"Tweets"})}),Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/user",children:"User"})}),Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/",onClick:function(){f.auth().signOut()},children:"LogOut"})})]})}),this.state.isLoading&&Object(a.jsx)("p",{className:"loading",children:"Loading..."}),!this.state.isLoading&&Object(a.jsxs)("div",{children:[Object(a.jsx)(m,{}),this.state.error&&Object(a.jsx)("div",{children:this.state.error}),Object(a.jsx)(x,{tweets:this.state.tweets})]})]}),Object(a.jsxs)(I.b,{path:"/user",children:[Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"navbar",children:[Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/tweets",children:"Tweets"})}),Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/user",children:"User"})}),Object(a.jsx)("li",{className:"navLi",children:Object(a.jsx)(w.b,{to:"/",onClick:function(){f.auth().signOut()},children:"LogOut"})})]})}),Object(a.jsx)(S,{onChangeUser:function(t){return e.onChangeUser(t)},username:this.state.userName})]}),Object(a.jsx)(I.b,{path:"/",children:Object(a.jsx)(y,{})})]})]})})}}]),n}(i.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),L()}},[[54,1,2]]]);
//# sourceMappingURL=main.bf0e2664.chunk.js.map